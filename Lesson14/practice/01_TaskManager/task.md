# Комплексное SQL-задание: Управление списком задач

## Цель
Создать простую базу данных для управления личным списком задач (ToDo List).

## Структура таблицы
Мы будем хранить задачи в одной таблице под названием `tasks`.
Каждая задача будет иметь следующие поля:

* **ID задачи (`task_id`):** Уникальный идентификатор для каждой задачи. Это будет первичный ключ, который автоматически увеличивается при добавлении новой задачи.
* **Название задачи (`title`):** Краткое описание задачи (например, "Купить молоко"). Должно быть обязательным полем и не может быть пустым.
* **Описание задачи (`description`):** Более подробное описание задачи. Может быть пустым (необязательное поле).
* **Статус задачи (`status`):** Текущий статус задачи. Должен иметь значение по умолчанию "В ожидании" (`Pending`). Должен быть только одним из следующих значений: "В ожидании" (`Pending`), "В процессе" (`In Progress`), "Завершено" (`Completed`).
* **Приоритет (`priority`):** Важность задачи. Может быть числом от 1 (низкий) до 5 (высокий). Значение по умолчанию — 3.

---

## Часть 1: Создание таблицы (CREATE TABLE)

Напишите SQL-запрос для создания таблицы `tasks` со всеми описанными выше полями и их ограничениями. Убедитесь, что учтены:

* `PRIMARY KEY` с автоинкрементом для `task_id`.
* `NOT NULL` для `title`.
* Значения по умолчанию для `status` и `priority`.
* Ограничение `CHECK` для `status`, чтобы он принимал только допустимые значения.
* Ограничение `CHECK` для `priority`, чтобы он принимал значения от 1 до 5.

---

### **Часть 2: Добавление данных (`INSERT INTO`)**

После успешного создания таблицы `tasks`, напишите SQL-запросы для добавления в неё минимум **7 различных задач**, используя следующие правила:

1.  **Задача 1**: Обычная задача со всеми заполненными полями.
2.  **Задача 2**: Задача без описания, но с **высоким приоритетом (5)**, статусом "В ожидании" и названием "Позвонить другу".
3.  **Задача 3**: Задача со статусом "В процессе" и названием "Завершить отчёт".
4.  **Задача 4**: Задача с **минимальным приоритетом (1)**.
5.  **Задача 5**: Задача, в которой вы полагаетесь на **значения по умолчанию** для `status` и `priority`.
6. И еще две задачи с параметрами на ваше усмотрение.

---

### **Часть 3: Извлечение данных (`SELECT`)**

Теперь, когда у вас есть данные в таблице, напишите следующие SQL-запросы для их извлечения:

1.  **Выбрать все задачи**: Получить все столбцы для всех задач в таблице.
2.  **Выбрать названия и статусы**: Получить только **`title`** и **`status`** всех задач.
3.  **Задачи с высоким приоритетом**: Выбрать все задачи, у которых **`priority`** равен 5, отсортированные по **`task_id`** в порядке убывания (сначала самые новые ID).
4.  **Задачи в ожидании**: Выбрать все задачи со статусом "В ожидании" (Pending), но только те, у которых есть **`description`**.
5.  **Количество задач по статусу**: Посчитать, сколько задач находится в каждом статусе.
6.  **Задачи, требующие внимания**: Выбрать **`title`**, **`status`** и **`priority`** для задач, у которых **`status`** не "Завершено". Отсортировать по **`priority`** по убыванию (сначала более важные).
7.  **Поиск по названию**: Найти все задачи, название которых содержит слово "презентацию" (без учета регистра).
8.  **Первые 3 задачи**: Выбрать первые 3 задачи по **`task_id`** в возрастающем порядке.


---

### **Часть 4: Обновление данных (`UPDATE`)**

Теперь, когда у вас есть данные в таблице `tasks`, напишите следующие SQL-запросы для их обновления:

1.  **Обновить статус задачи**: Измените статус задачи с **ID 1** на "Завершено" (Completed).
2.  **Повысить приоритет**: Увеличьте приоритет всех задач со статусом "В ожидании" (Pending) на 1. Убедитесь, что приоритет не превышает 5.
   * Примечание: чтобы при увеличении преоритета не выйти за границы(больше 5), воспользуйтесь [функцией MIN](https://sqlite.org/lang_corefunc.html#min_scalar)  `MIN(priority + 1, 5)`.
3.  **Изменить описание задачи**: Добавьте или обновите описание для задачи с **названием "Завершить отчёт"** на "Срочно подготовить квартальный отчёт".
4.  **Сбросить приоритет**: Установите приоритет **всех завершенных задач** на 1.
5.  **Исправить название задачи**: Найдите задачу с названием "Позвонить другу" и измените его на "Позвонить Сергею".

---

### **Часть 5: Удаление данных (`DELETE`)**

1. **Удалить одну задачу по ID**: Удалите задачу с task_id равным 2.
2. **Удалить завершенные задачи**: Удалите все задачи, у которых status равен "Завершено" (Completed).
3. **Удалить задачи с низким приоритетом без описания**: Удалите все задачи, у которых priority равен 1 И у которых description равен NULL.
4. **Удалить все оставшиеся задачи**: После выполнения предыдущих пунктов, удалите все оставшиеся записи из таблицы tasks.
5. **Проверить, что таблица пуста**: Напишите запрос SELECT, чтобы убедиться, что в таблице tasks больше нет записей.